# Realm Sync 
- **Realm Sync** เป็นบริการเสริมของ Realm ที่ออกแบบมาเพื่อการซิงค์ข้อมูลแบบเรียลไทม์ข้ามอุปกรณ์ (online sync) โดยเชื่อมต่อกับ **MongoDB Atlas** ทำให้ข้อมูลที่ถูกจัดเก็บในแอปพลิเคชันสามารถถูกซิงค์และแชร์ระหว่างอุปกรณ์หลาย ๆ เครื่องได้ ซึ่งเหมาะกับแอปที่ต้องการให้ข้อมูลเป็นปัจจุบันเสมอเมื่อเชื่อมต่ออินเทอร์เน็ต แต่ยังสามารถทำงานแบบออฟไลน์ได้

## 1. โครงสร้างและแนวคิดพื้นฐาน
- **Realm Sync**:
    - มีโครงสร้างที่อิงกับ MongoDB Atlas ทำให้สามารถเชื่อมโยงข้อมูลจากแอปพลิเคชันไปยังฐานข้อมูลคลาวด์ได้
    - ทำงานแบบ online-first โดยการซิงค์ข้อมูลเมื่อมีการเชื่อมต่ออินเทอร์เน็ต แต่ก็สามารถทำงานในโหมดออฟไลน์และซิงค์ข้อมูลภายหลังได้

## 2. ความเร็วและประสิทธิภาพ
- **Realm Sync**:
    - ประสิทธิภาพในการซิงค์ข้อมูลขึ้นอยู่กับการเชื่อมต่ออินเทอร์เน็ตและการตั้งค่าบน MongoDB Atlas
    - ออกแบบมาให้มีประสิทธิภาพสูงในการจัดการข้อมูลแบบเรียลไทม์ โดยไม่กระทบต่อประสบการณ์การใช้งานแม้จะอยู่ในโหมดออฟไลน์

## 3. การติดตั้งและการใช้งาน
- **Realm Sync**:
    - ต้องมีการตั้งค่า **MongoDB Atlas** และเปิดใช้งาน **Realm Sync** บน MongoDB Atlas ก่อน
    - กำหนด **Realm App ID** ในโปรเจกต์ เพื่อให้แอปสามารถเชื่อมต่อกับ MongoDB Atlas ได้
    - ติดตั้ง **RealmSwift** โดยใช้ `pod 'RealmSwift'` หรือผ่าน Swift Package Manager แล้วทำการ import `RealmSwift` ในโค้ด

## 4. การซิงค์และการทำงานข้ามแพลตฟอร์ม
- **Realm Sync**:
    - รองรับการซิงค์ข้อมูลข้ามอุปกรณ์ที่ใช้ MongoDB Atlas ทำให้ข้อมูลที่ถูกจัดเก็บในอุปกรณ์หนึ่งสามารถแชร์ไปยังอุปกรณ์อื่น ๆ ได้เมื่อเชื่อมต่ออินเทอร์เน็ต
    - รองรับการทำงานแบบออฟไลน์ โดยข้อมูลจะถูกเก็บในอุปกรณ์ และเมื่อเชื่อมต่ออินเทอร์เน็ตจะทำการซิงค์ข้อมูลที่เปลี่ยนแปลงโดยอัตโนมัติ

## 5. การออกแบบ Schema และการอัปเดตโครงสร้างฐานข้อมูล
- **Realm Sync**:
    - การจัดการ schema ค่อนข้างง่าย เนื่องจาก Realm จะพยายามจัดการการ migration ให้อัตโนมัติ
    - สามารถกำหนด migration แบบ manual ได้เมื่อมีการเปลี่ยนแปลง schema ที่ซับซ้อน

### ตัวอย่างโค้ดสำหรับการใช้งาน Realm Sync

**การเชื่อมต่อและการซิงค์ข้อมูล**:
```swift
import RealmSwift

let app = App(id: "your-realm-app-id") // ระบุ App ID ของคุณ
let user = try await app.login(credentials: Credentials.anonymous)

let configuration = user.configuration(partitionValue: "your-partition-key")
let realm = try await Realm(configuration: configuration)
```

### ในตัวอย่างนี้:
- สร้าง `App` object ที่ใช้ Realm App ID เพื่อระบุแอปพลิเคชันบน MongoDB Atlas
- ทำการล็อกอินโดยใช้ `Credentials.anonymous` (หรือจะใช้วิธีล็อกอินแบบอื่นได้ เช่น อีเมลและรหัสผ่าน)
- กำหนดการซิงค์ด้วย `user.configuration(partitionValue: "your-partition-key")` โดยระบุ partition key ซึ่งจะใช้ในการแยกข้อมูลสำหรับแต่ละผู้ใช้หรือกลุ่มข้อมูล
  

## สรุป
- **Realm Sync** เหมาะสำหรับแอปพลิเคชันที่ต้องการการซิงค์ข้อมูลแบบเรียลไทม์ข้ามอุปกรณ์ และต้องการเชื่อมต่อกับ MongoDB Atlas
- ใช้งานง่ายเมื่อเทียบกับการพัฒนาโซลูชันการซิงค์ข้อมูลด้วยตนเอง โดยมาพร้อมกับความสามารถในการทำงานแบบออฟไลน์
